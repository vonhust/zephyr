CONFIG_SOC_QEMU_CORTEX_A53=y
CONFIG_BOARD_QEMU_CORTEX_A53=y
CONFIG_ARM_ARCH_TIMER=y
CONFIG_QEMU_ICOUNT=n

# Cache management
CONFIG_CACHE_MANAGEMENT=y

# Enable UART driver
CONFIG_SERIAL=y

# Enable console
CONFIG_CONSOLE=y
# no early console, because uart_rpmsg is used
CONFIG_EARLY_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_PRINTK=y

# to use remote, must be in Non-Secure world
CONFIG_ARMV8_A_NS=y

# Enable RPMSG based serial port
CONFIG_UART_RPMSG=y
CONFIG_UART_INTERRUPT_DRIVEN=y

CONFIG_OPENAMP=y
CONFIG_RPMSG_SERVICE_MODE_REMOTE=y
CONFIG_OPENAMP_MASTER=n
CONFIG_OPENAMP_RSC_TABLE_NUM_RPMSG_BUFF=8
CONFIG_OPENAMP_RSC_TABLE=y
CONFIG_HEAP_MEM_POOL_SIZE=4096
# shell must be initialized after uart_rpmsg
CONFIG_SHELL_BACKEND_SERIAL_INIT_PRIORITY=60
# the tx ring buffer size is the same of bufffer of rpmsg_virtio buffer
CONFIG_SHELL_BACKEND_SERIAL_TX_RING_BUFFER_SIZE=512

CONFIG_IPM=n

CONFIG_PCIE=y
CONFIG_POLL=y
CONFIG_PCIE_CONTROLLER=y
CONFIG_PCIE_ECAM=y
CONFIG_KERNEL_VM_SIZE=0x80000000

# Hungry PCI requires phys addresses with more than 32 bits
CONFIG_ARM64_VA_BITS_40=y
CONFIG_ARM64_PA_BITS_40=y

CONFIG_VIRTUALIZATION=y
CONFIG_IVSHMEM=y
CONFIG_IVSHMEM_V2=y
CONFIG_IVSHMEM_DOORBELL=y
CONFIG_DYNAMIC_INTERRUPTS=y
# the correct init order:
# serial->pci controler->
# ->pci scan->pci device(ivshmem)
# ->virtio->rpmsg endpoint
CONFIG_SERIAL_INIT_PRIORITY=31
CONFIG_CONSOLE_INIT_PRIORITY=32
CONFIG_KERNEL_INIT_PRIORITY_DEVICE=41

CONFIG_LOG=y
CONFIG_LOG_BACKEND_UART=y

